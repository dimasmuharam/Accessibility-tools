<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Accessibility Score Checker - Disabilitas.com</title>
    <meta name="description" content="Free audit tool to check website accessibility score. Analisa performa web Anda sesuai standar Google Lighthouse & WCAG.">    
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5878514175202601" crossorigin="anonymous"></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FGJKD3430G"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FGJKD3430G');
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <link rel="canonical" href="https://www.accessible.web.id/checker.html" />
    
    <link rel="icon" type="image/x-icon" href="dimaster.ico">
    <link rel="stylesheet" href="style.css">

    <style>
        :root {
            /* Light Mode (Standar Awal) */
            --bg-card: #ffffff; 
            --text-main: #333333; 
            --border-color: #ddd;
            
            /* Warna Kotak Info */
            --info-bg: #f0f8ff; 
            --info-text: #333333;
            --info-border: #0056b3;

            /* Warna Emosi */
            --panic-bg: #fff5f5; --panic-text: #8a1c24; --panic-border: #dc3545;
            --caution-bg: #fffbf2; --caution-text: #946c00; --caution-border: #ffc107;
            --success-bg: #f0fff4; --success-text: #155724; --success-border: #28a745;
        }

        body.dark-mode {
            /* Dark Mode (High Contrast Fix) */
            --bg-card: #1e1e1e; 
            --text-main: #ffffff; 
            --border-color: #666;
            
            /* Warna Kotak Info (Dark Mode) */
            --info-bg: #2d2d2d; 
            --info-text: #ffffff; 
            --info-border: #4dabf7; 

            /* Warna Emosi Dark Mode */
            --panic-bg: #3e0a0e; --panic-text: #ffcccc;
            --caution-bg: #332701; --caution-text: #fff3cd;
            --success-bg: #0f2e1b; --success-text: #d1e7dd;
        }

        .result-card {
            display: none; margin-top: 30px; background: var(--bg-card);
            border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); color: var(--text-main); outline: none;
        }

        .result-header { padding: 30px; text-align: center; border-bottom: 1px solid var(--border-color); transition: all 0.5s ease; }
        
        .mode-panic .result-header { background-color: var(--panic-bg); border-bottom: 4px solid var(--panic-border); color: var(--panic-text); }
        .mode-caution .result-header { background-color: var(--caution-bg); border-bottom: 4px solid var(--caution-border); color: var(--caution-text); }
        .mode-success .result-header { background-color: var(--success-bg); border-bottom: 4px solid var(--success-border); color: var(--success-text); }

        .score-big { font-size: 5rem; font-weight: 900; line-height: 1; margin: 15px 0; display: block; }
        .verdict-badge { font-size: 1.2rem; text-transform: uppercase; font-weight: 800; padding: 5px 15px; border-radius: 50px; display: inline-block; margin-bottom: 10px; border: 2px solid currentColor; }

        .share-section { padding: 20px; background: rgba(0,0,0,0.03); text-align: center; }
        .share-title { font-size: 0.85rem; font-weight: bold; margin-bottom: 15px; display: block; opacity: 0.8; letter-spacing: 1px; color: var(--text-main); }

        .main-actions { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .btn-action { 
            padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; 
            font-size: 0.95rem; display: flex; align-items: center; gap: 8px; color: white; text-decoration: none;
            transition: transform 0.2s;
        }
        .btn-action:hover { transform: translateY(-2px); opacity: 0.95; }
        .btn-pdf { background-color: #343a40; }
        .btn-img { background-color: #E1306C; }

        .social-buttons { display: flex; gap: 10px; justify-content: center; margin-top: 10px; flex-wrap: wrap; }
        .btn-soc {
            width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: white; text-decoration: none; font-size: 1.1rem; transition: transform 0.2s; font-weight: bold;
        }
        .btn-soc:hover { transform: scale(1.1); }
        .wa { background-color: #25D366; } .fb { background-color: #1877F2; } .tw { background-color: #000; border: 1px solid #333; } .li { background-color: #0077b5; }
        body.dark-mode .tw { background-color: #fff; color: #000; }

        #loading-log { font-family: monospace; font-size: 0.9rem; color: #666; margin-top: 15px; height: 20px; display: none; }
        body.dark-mode #loading-log { color: #aaa; }

        /* CLASS BARU: INFO BOX */
        .info-box {
            background-color: var(--info-bg);
            color: var(--info-text);
            border-left: 5px solid var(--info-border);
            padding: 20px; margin-top: 25px;
            border-radius: 4px;
        }
        .cta-link {
            display: inline-block; padding: 10px 20px; margin-top: 10px;
            background: var(--info-border); color: #fff; text-decoration: none; border-radius: 5px; font-weight: bold;
        }
        .cta-link:hover { opacity: 0.9; }

        /* TEMPLATE GAMBAR (Akan disembunyikan via inline style & aria-hidden) */
        #share-card {
            position: fixed; top: -9999px; left: -9999px; width: 800px; height: 800px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
            color: white; font-family: sans-serif; padding: 40px 0 0 0; box-sizing: border-box;
        }
        #share-card.panic { background: linear-gradient(135deg, #b92b27 0%, #150000 100%); }
        #share-card.caution { background: linear-gradient(135deg, #ff8008 0%, #ffc837 100%); }
        #share-card.success { background: linear-gradient(135deg, #1d976c 0%, #93f9b9 100%); }

        @media (max-width: 600px) { .main-actions { flex-direction: column; } .btn-action { width: 100%; justify-content: center; } }
    </style>
</head>
<body>

    <a href="#main-content" class="skip-link">Lewati ke Konten Utama</a>

    <header>
        <div class="container navbar">
            <div class="brand-wrapper">
                <a href="index.html">
                    <img src="logo.png" alt="Logo Accessible Web Indonesia" width="100" height="100">
                </a>
                <div>
                    <a href="index.html" class="brand-title"><h1>Accessible Web Indonesia</h1></a>
                    <small class="brand-subtitle">Tools Aksesibilitas & Edukasi Digital</small>
                </div>
            </div>
            <div class="nav-controls">
                <nav aria-label="Menu Utama">
                    <ul id="nav-menu">
                        <li><a href="index.html">Home</a></li>
                        <li class="dropdown-wrapper">
                            <button id="tools-btn" aria-expanded="false" aria-haspopup="true" aria-controls="tools-list">Tools ‚ñæ</button>
                            <ul id="tools-list" class="dropdown-content">
                                <li><a href="checker.html" aria-current="page" class="active">‚úÖ Access Score</a></li>
                                <li><a href="contrast.html">üé® Contrast Checker</a></li>
                                <li><a href="blind.html">üëÅÔ∏è Tes Buta Warna</a></li>
                                <li><a href="tts.html">üó£Ô∏è TTS & Voice</a></li>
                                <li><a href="braille.html">‚†É‚†ó‚†á Braille Latin</a></li>
                                <li><a href="quran.html">üïå Quran Braille</a></li>
                                <li><a href="sign.html">ü§ü Sign Language</a></li>
                                <li><a href="dyslexia.html">üòµ Dyslexia Sim</a></li>
                            </ul>
                        </li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
                <button id="theme-toggle" aria-label="Switch Theme">üåô</button>
                <button id="lang-toggle" aria-label="Switch Language">ID</button>
                <div id="google_translate_element" class="visually-hidden"></div>
            </div>
        </div>
    </header>

    <main id="main-content" class="container" tabindex="-1">
        <h1>Website Accessibility Audit Scanner</h1>
        <p>Cek apakah website Anda mematuhi hukum dan ramah disabilitas. Masukkan URL untuk audit otomatis standar WCAG.</p>

        <div class="tool-box">
            <label for="urlInput"><strong>URL Website (https://...)</strong></label>
            <div style="display: flex; gap:10px; flex-wrap:wrap;">
                <input type="url" id="urlInput" placeholder="Contoh: https://kemkes.go.id" required style="flex:1;">
                <button onclick="runAudit()" id="btnCheck" class="button">Mulai Audit</button>
            </div>

            <div id="loading-log" role="status" aria-live="polite"></div>

            <div id="result" class="result-card" tabindex="-1">
                
                <div class="result-header">
                    <p style="margin:0; opacity: 0.8;">Target URL: <span id="resUrl" style="font-weight:bold;">-</span></p>
                    <div class="verdict-badge" id="verdictText">-</div>
                    <span class="score-big" id="resScore">0</span>
                    <p id="descText" style="max-width: 600px; margin: 0 auto; line-height: 1.5; font-size: 0.95rem;">-</p>
                </div>

                <div class="share-section">
                    <span class="share-title">üìÇ DOWNLOAD & SHARE</span>
                    <div class="main-actions">
                        <button class="btn-action btn-pdf" onclick="downloadPDF()">üìÑ Download Surat Audit (PDF)</button>
                        <button class="btn-action btn-img" onclick="shareImage()">üì∏ Share Image (IG/WA)</button>
                    </div>

                    <span class="share-title" style="margin-top: 20px;">üí¨ SHARE LINK VIA:</span>
                    <div class="social-buttons">
                        <a id="btnWA" href="#" target="_blank" rel="noopener noreferrer" class="btn-soc wa" aria-label="WhatsApp">WA</a>
                        <a id="btnX" href="#" target="_blank" rel="noopener noreferrer" class="btn-soc tw" aria-label="X Twitter">X</a>
                        <a id="btnFB" href="#" target="_blank" rel="noopener noreferrer" class="btn-soc fb" aria-label="Facebook">FB</a>
                        <a id="btnLI" href="#" target="_blank" rel="noopener noreferrer" class="btn-soc li" aria-label="LinkedIn">in</a>
                    </div>
                </div>

                <div style="padding: 25px; text-align: center; border-top: 1px solid var(--border-color);">
                    <h3 style="color: var(--panic-text); margin-top: 0; font-size: 1.1rem;">‚ö†Ô∏è Peringatan: Mesin Bukan Manusia</h3>
                    <p style="font-size: 0.9rem; color: var(--text-main);">Skor otomatis ini belum menjamin Anda bebas dari tuntutan hukum. Audit manual diperlukan.</p>
                    
                    <div class="info-box">
                        <h4 style="margin-top: 0; color: inherit;">Butuh Sertifikat Aksesibilitas?</h4>
                        <p style="font-size: 0.9rem; margin-bottom: 15px;">Dapatkan audit dari penguji tunanetra asli di Disabilitas.com.</p>
                        <a href="https://disabilitas.com" class="cta-link" target="_blank" rel="noopener noreferrer">Hubungi Konsultan Disabilitas.com &rarr;</a>
                    </div>
                </div>
            </div>
            
            <article class="content-article" style="margin-top: 3rem; border-top: 1px solid #eee; padding-top: 2rem;">
                <h2>Panduan Lengkap Audit Aksesibilitas</h2>
                <p>Memiliki website yang aksesibel adalah keharusan hukum (UU No. 8 Tahun 2016). Tool ini menggunakan standar Google Lighthouse Mobile Strategy.</p>
                
                <h3>1. Apa yang Diperiksa?</h3>
                <ul>
                    <li><strong>Alt Text:</strong> Deskripsi gambar untuk tunanetra.</li>
                    <li><strong>Struktur Heading:</strong> Navigasi logis untuk screen reader.</li>
                    <li><strong>Warna & Kontras:</strong> Kenyamanan baca bagi low vision.</li>
                </ul>

                <h3>2. Prinsip POUR (WCAG)</h3>
                <ol>
                    <li><strong>Perceivable:</strong> Informasi dapat ditangkap indera.</li>
                    <li><strong>Operable:</strong> Dapat dioperasikan dengan keyboard.</li>
                    <li><strong>Understandable:</strong> Informasi mudah dipahami.</li>
                    <li><strong>Robust:</strong> Kompatibel dengan teknologi bantu.</li>
                </ol>

                <div style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">
                    <h3>Mengapa Skor Aksesibilitas Itu Penting?</h3>
                    <p>Banyak pemilik website menganggap aksesibilitas hanya fitur tambahan. Padahal, aksesibilitas adalah fondasi dari web yang sehat. Skor yang Anda lihat di atas mencerminkan seberapa mudah konten Anda dikonsumsi oleh mesin pencari (SEO) dan teknologi bantu (Assistive Technology).</p>
                    
                    <h4>1. Kepatuhan Hukum & Risiko Litigasi</h4>
                    <p>Di Indonesia, UU No. 8 Tahun 2016 mewajibkan penyedia layanan publik untuk menyediakan aksesibilitas. Di kancah global, standar WCAG (Web Content Accessibility Guidelines) menjadi acuan hukum. Mengabaikan ini berarti membuka risiko tuntutan hukum diskriminasi digital.</p>

                    <h4>2. Performa SEO & Peringkat Google</h4>
                    <p>Google menyukai website yang aksesibel. Struktur heading yang rapi, alt text pada gambar, dan navigasi yang jelas bukan hanya membantu tunanetra, tapi juga memudahkan robot Google mengindeks konten Anda. Website aksesibel cenderung memiliki peringkat SEO yang lebih baik.</p>

                    <h4>3. Membuka Pasar 1 Miliar Orang</h4>
                    <p>Menurut WHO, ada lebih dari 1 miliar penyandang disabilitas di dunia (15% populasi). Jika website Anda tidak aksesibel, Anda secara tidak sadar menolak 15% calon pelanggan potensial. Bisnis yang inklusif adalah bisnis yang menguntungkan.</p>

                    <h4>Bagaimana Cara Memperbaiki Skor?</h4>
                    <p>Jika skor Anda merah (di bawah 60), prioritas perbaikan adalah: 
                    <strong>(1) Tambahkan Alt Text</strong> pada semua gambar bermakna, 
                    <strong>(2) Pastikan Kontras Warna</strong> teks dan background minimal rasio 4.5:1, dan 
                    <strong>(3) Cek Navigasi Keyboard</strong>, pastikan semua menu bisa diakses tanpa mouse.</p>
                </div>
                <div class="info-box">
                    <h3 style="margin-top: 0; color: inherit;">Mengapa Harus Audit Manual?</h3>
                    <p>Mesin hanya mendeteksi 30% error. Sisanya (UX & Kenyamanan) hanya bisa dirasakan manusia.</p>
                    <a href="https://disabilitas.com" class="cta-link" target="_blank" rel="noopener noreferrer">Hubungi Tim Ahli Disabilitas.com &rarr;</a>
                </div>
            </article>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 PT Dimaster Education Berprestasi. All Rights Reserved.</p>
            
            <p class="ecosystem-links">Our Ecosystem: 
                <a href="https://kartunet.com" target="_blank" rel="noopener noreferrer">Kartunet</a> | 
                <a href="https://disabilitas.com" target="_blank" rel="noopener noreferrer">Disabilitas.com</a> | 
                <a href="https://www.dimaster.co.id" target="_blank" rel="noopener noreferrer">Dimaster Group</a>
            </p>
            
            <p class="footer-nav">
                <a href="about.html">About Us</a> |
                <a href="contact.html">Contact Support</a> |
                <a href="privacy.html">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <div id="share-card" aria-hidden="true" tabindex="-1">
        <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; padding: 40px;">
            <img src="logo.png" alt="" style="width: 150px; height: auto; margin-bottom: 20px; filter: brightness(0) invert(1) drop-shadow(0 4px 6px rgba(0,0,0,0.3));">
            
            <div style="font-size: 1.5rem; text-transform: uppercase; letter-spacing: 2px; opacity: 0.8; margin-bottom: 10px;">WEB ACCESSIBILITY SCORE</div>
            
            <div id="cardUrl" style="font-size: 1.5rem; background: rgba(0,0,0,0.3); padding: 10px 30px; border-radius: 50px; margin-bottom: 30px;">-</div>
            
            <div id="cardScore" style="font-size: 15rem; font-weight: 900; line-height: 1; text-shadow: 4px 4px 20px rgba(0,0,0,0.4);">0</div>
            
            <div id="cardVerdict" style="font-size: 4rem; font-weight: 800; text-transform: uppercase; margin: 20px 0; border: 6px solid white; padding: 10px 50px; transform: rotate(-5deg); display: inline-block;">KRITIS</div>
            
            <div id="cardImpact" style="font-size: 1.8rem; font-weight: bold; margin-bottom: 10px; max-width: 90%;">‚ö†Ô∏è Berpotensi Diskriminatif</div>
        </div>

        <div id="cardFooter" style="background: rgba(0,0,0,0.4); width: 100%; padding: 25px 0; font-size: 2rem; font-weight: 900; letter-spacing: 1px; margin-top: auto;">
            CEK WEBSITE KAMU: accessible.web.id
        </div>
    </div>

    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'id', includedLanguages: 'en,id', autoDisplay: false }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        const apiKey = 'AIzaSyBIya_RRn2SoSU8j0yOPHjgCQ6yO7f-Mdg'; 
        let globalShareText = ""; 
        const THRESHOLD_PANIC = 60; 
        const THRESHOLD_CAUTION = 94; 

        function getCurrentLang() {
            const cookie = document.cookie.match('(^|;) ?googtrans=([^;]*)(;|$)');
            return cookie && cookie[2].includes('/en') ? 'en' : 'id';
        }

        document.addEventListener("DOMContentLoaded", function() {
            const langBtn = document.getElementById('lang-toggle');
            const currentLang = getCurrentLang();
            langBtn.innerText = currentLang === 'en' ? 'ID' : 'EN';
            
            langBtn.addEventListener('click', function() {
                const targetLang = currentLang === 'en' ? 'id' : 'en';
                document.cookie = "googtrans=/id/" + targetLang + "; path=/";
                document.cookie = "googtrans=/id/" + targetLang + "; path=/; domain=" + window.location.hostname;
                window.location.reload();
            });
        });

        const texts = {
            id: {
                loading: ["Menghubungi Server Google...", "Memindai DOM HTML...", "Cek Kontras Warna...", "Validasi Label ARIA...", "Kalkulasi Skor..."],
                btnLoading: "MENGANALISA...", btnAgain: "Cek URL Lain",
                verdict: { low: "KRITIS / GAGAL", mid: "BERISIKO TINGGI", high: "TEKNIS LULUS*" },
                card: { low: "GAGAL", mid: "WASPADA", high: "LULUS*" },
                impact: { low: "‚ö†Ô∏è Website ini sulit diakses & berpotensi diskriminatif.", mid: "‚ö†Ô∏è Belum inklusif. Masih ada hambatan akses.", high: "‚úÖ Ramah Disabilitas & Inklusif." },
                footer: "CEK WEBSITE KAMU DI: accessible.web.id",
                desc: { low: "Sangat buruk. Website ini sulit diakses difabel.", mid: "Jangan tertipu skor ini. Masih banyak celah.", high: "Secara teknis baik. Tetap lakukan audit manual." },
                share: { low: "Parah üò± Cek skor aksesibilitas website {url}, cuma dapat {score}/100.", mid: "Hati-hati ü§î Skor aksesibilitas {url} dapat {score}/100. Masih berisiko.", high: "Keren üèÜ Website {url} dapat skor {score}/100! Tetap butuh cek manual." },
                pdf: {
                    to: "Kepada Yth,", manager: "Pengelola Situs:", place: "Di Tempat", greeting: "Dengan hormat,",
                    opening: "Berdasarkan hasil pengecekan otomatis yang telah dilakukan pada website", opening2: ", kami menyampaikan laporan awal aksesibilitas website Anda.",
                    scoreTitle: "SKOR AKSESIBILITAS ANDA:", noteTitle: "‚ö†Ô∏è CATATAN PENTING:",
                    note1: "Hasil di atas hanyalah deteksi mesin. Mesin tidak bisa merasakan pengalaman pengguna.", note2: "Risiko hukum (UU No. 8/2016) mungkin masih ada meski skor terlihat tinggi.",
                    closing: "Demikian laporan awal ini kami sampaikan. Kami siap membantu Anda melakukan", closing2: "audit manual dan pendampingan sertifikasi aksesibilitas.",
                    regards: "Hormat kami,", sign: "(Tanda Tangan Digital)", page2Title: "IMPLIKASI STRATEGIS & MITIGASI RISIKO BISNIS",
                    p1Title: "1. Metodologi Standar Global (WCAG)", p1Body: "Audit ini mengacu pada standar internasional WCAG 2.1 Level AA dengan prinsip POUR: Perceivable, Operable, Understandable, dan Robust.",
                    p2Title: "2. Tunanetra sebagai Standar Kualitas Universal", p2Body: "Jika website Anda mudah digunakan oleh tunanetra (via keyboard & screen reader), maka secara otomatis website tersebut akan sangat ringan dan mudah digunakan oleh semua orang.",
                    p3Title: "3. Mitigasi Risiko Hukum & Pasar", p3Body: "Ketidakpatuhan terhadap standar aksesibilitas berisiko melanggar UU No. 8/2016. Website inklusif juga membuka potensi pasar 22+ juta penyandang disabilitas.",
                    cta: "JADWALKAN KONSULTASI AUDIT MANUAL SEKARANG"
                }
            },
            en: {
                loading: ["Contacting Google Server...", "Scanning DOM...", "Checking Color Contrast...", "Validating ARIA...", "Calculating Score..."],
                btnLoading: "ANALYZING...", btnAgain: "Check Another URL",
                verdict: { low: "CRITICAL FAILURE", mid: "HIGH RISK", high: "TECHNICALLY PASSED*" },
                card: { low: "FAILED", mid: "AT RISK", high: "PASSED*" },
                impact: { low: "‚ö†Ô∏è Hard to access & potentially discriminatory.", mid: "‚ö†Ô∏è Not fully inclusive. Barriers remain.", high: "‚úÖ Disability Friendly & Inclusive." },
                footer: "CHECK YOUR SITE AT: accessible.web.id",
                desc: { low: "Severe accessibility issues detected.", mid: "Don't be fooled by this score. Risks remain.", high: "Technically good. Manual audit recommended." },
                share: { low: "Shocking üò± Accessibility score for {url} is only {score}/100.", mid: "Be careful ü§î Website {url} got {score}/100. Risks remain.", high: "Great üèÜ Website {url} hit {score}/100! Manual check needed." },
                pdf: {
                    to: "To:", manager: "Site Manager of:", place: "In Place", greeting: "Dear Sir/Madam,",
                    opening: "Based on the automated accessibility audit results conducted on", opening2: ", we hereby submit the preliminary accessibility report for your website.",
                    scoreTitle: "YOUR ACCESSIBILITY SCORE:", noteTitle: "‚ö†Ô∏è IMPORTANT NOTE:",
                    note1: "The result above is machine-detected. Machines cannot perceive user experience (UX).", note2: "Legal risks (Indonesian Law No. 8/2016) may still exist even with high scores.",
                    closing: "Thus we convey this preliminary report. We are ready to assist you with", closing2: "manual audit and accessibility certification process.",
                    regards: "Sincerely,", sign: "(Digital Signature)", page2Title: "STRATEGIC IMPLICATIONS & BUSINESS RISK MITIGATION",
                    p1Title: "1. Global Standard Methodology (WCAG)", p1Body: "This audit is based on international standard WCAG 2.1 Level AA using POUR principles: Perceivable, Operable, Understandable, and Robust.",
                    p2Title: "2. Blind Users as Universal Quality Standard", p2Body: "If your website is accessible to blind users (via keyboard & screen reader), it guarantees ease of use for everyone (Seniors, small screen users, etc).",
                    p3Title: "3. Legal & Market Risk Mitigation", p3Body: "Non-compliance with accessibility standards risks violating Law No. 8/2016. An inclusive website unlocks a market potential of 22+ million people with disabilities.",
                    cta: "SCHEDULE MANUAL AUDIT CONSULTATION NOW"
                }
            }
        };

        function runAudit() {
            let urlInput = document.getElementById('urlInput').value.trim();
            const btn = document.getElementById('btnCheck');
            const resultCard = document.getElementById('result');
            const logArea = document.getElementById('loading-log');
            const lang = getCurrentLang(); 
            
            if(!urlInput) { alert(lang === 'en' ? "Please enter URL!" : "Mohon masukkan URL!"); return; }
            if (!urlInput.startsWith('http')) urlInput = 'https://' + urlInput;

            btn.disabled = true; btn.innerText = texts[lang].btnLoading;
            resultCard.style.display = 'none'; logArea.style.display = 'block';

            const logs = texts[lang].loading;
            let step = 0;
            const logInterval = setInterval(() => { if(step < logs.length) { logArea.innerText = "> " + logs[step]; step++; } }, 800);

            fetch(`https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${encodeURIComponent(urlInput)}&key=${apiKey}&category=ACCESSIBILITY&strategy=mobile`)
            .then(res => res.json()).then(data => {
                clearInterval(logInterval); logArea.innerText = "> Done!"; setTimeout(() => logArea.style.display = 'none', 500);
                if (!data.lighthouseResult) throw new Error("No Data");
                
                const score = Math.round(data.lighthouseResult.categories.accessibility.score * 100);
                displayResult(score, urlInput, lang);
                prepareShareText(score, urlInput, lang);
                btn.disabled = false; btn.innerText = texts[lang].btnAgain;
            }).catch(err => {
                clearInterval(logInterval); logArea.innerText = "Error: " + err.message; btn.disabled = false; btn.innerText = "Try Again";
            });
        }

        function displayResult(score, url, lang) {
            const card = document.getElementById('result');
            const resScore = document.getElementById('resScore');
            const verdict = document.getElementById('verdictText');
            const desc = document.getElementById('descText');
            const resUrl = document.getElementById('resUrl');
            const cardScore = document.getElementById('cardScore');
            const cardVerdict = document.getElementById('cardVerdict');
            const cardUrl = document.getElementById('cardUrl');
            const shareCard = document.getElementById('share-card');
            const cardImpact = document.getElementById('cardImpact');
            const cardFooter = document.getElementById('cardFooter'); 

            card.classList.remove('mode-panic', 'mode-caution', 'mode-success');
            shareCard.classList.remove('panic', 'caution', 'success');

            resScore.innerText = score; resUrl.innerText = url;
            cardScore.innerText = score; cardUrl.innerText = url;

            const content = texts[lang];
            cardFooter.innerText = content.footer;

            if (score <= THRESHOLD_PANIC) {
                card.classList.add('mode-panic'); shareCard.classList.add('panic');
                verdict.innerText = content.verdict.low; 
                cardVerdict.innerText = content.card.low; 
                cardImpact.innerText = content.impact.low; 
                desc.innerText = content.desc.low;
            } else if (score <= THRESHOLD_CAUTION) {
                card.classList.add('mode-caution'); shareCard.classList.add('caution');
                verdict.innerText = content.verdict.mid; 
                cardVerdict.innerText = content.card.mid; 
                cardImpact.innerText = content.impact.mid; 
                desc.innerText = content.desc.mid;
            } else {
                card.classList.add('mode-success'); shareCard.classList.add('success');
                verdict.innerText = content.verdict.high; 
                cardVerdict.innerText = content.card.high; 
                cardImpact.innerText = content.impact.high; 
                desc.innerText = content.desc.high;
            }
            card.style.display = 'block'; card.scrollIntoView({ behavior: 'smooth', block: 'center' }); card.focus();
        }

        function prepareShareText(score, url, lang) {
            let baseText = "";
            const content = texts[lang];
            if(score <= THRESHOLD_PANIC) baseText = content.share.low;
            else if (score <= THRESHOLD_CAUTION) baseText = content.share.mid;
            else baseText = content.share.high;
            
            let finalText = baseText.replace("{url}", url).replace("{score}", score);
            globalShareText = finalText + "\n\n#CekAkses accessible.web.id";
            const encodedText = encodeURIComponent(globalShareText);
            const siteUrl = encodeURIComponent("https://accessible.web.id");

            document.getElementById('btnWA').href = `https://api.whatsapp.com/send?text=${encodedText}`;
            document.getElementById('btnX').href = `https://twitter.com/intent/tweet?text=${encodedText}`;
            document.getElementById('btnFB').href = `https://www.facebook.com/sharer/sharer.php?u=${siteUrl}`;
            document.getElementById('btnLI').href = `https://www.linkedin.com/sharing/share-offsite/?url=${siteUrl}`;
        }

        async function shareImage() {
            const cardElement = document.getElementById('share-card');
            const btn = document.querySelector('.btn-img');
            const originalText = btn.innerText;

            let textCopied = false;
            try { await navigator.clipboard.writeText(globalShareText); textCopied = true; } 
            catch (err) {
                try {
                    const textArea = document.createElement("textarea");
                    textArea.value = globalShareText; textArea.style.position = "fixed"; 
                    document.body.appendChild(textArea); textArea.focus(); textArea.select();
                    document.execCommand('copy'); document.body.removeChild(textArea); textCopied = true;
                } catch (e) { console.error("Gagal copy text", e); }
            }

            btn.innerText = "Processing...";
            
            html2canvas(cardElement, { scale: 2 }).then(canvas => {
                canvas.toBlob(blob => {
                    const file = new File([blob], "audit-result.png", { type: "image/png" });
                    btn.innerText = originalText;

                    if (navigator.share && navigator.canShare && navigator.canShare({ files: [file] })) {
                        navigator.share({ title: 'Score', text: globalShareText, files: [file] }).catch(console.error);
                    } else {
                        const link = document.createElement('a');
                        link.download = 'audit-result.png'; link.href = canvas.toDataURL(); link.click(); 

                        if(textCopied) {
                            alert("‚úÖ GAMBAR TERSIMPAN & CAPTION TER-COPY!\n\n‚ö† CARA PASTE DI WHATSAPP AGAR RAPI:\n\n1. Upload Gambar.\n2. JANGAN LANGSUNG KIRIM (ENTER)!\n3. Klik kolom 'Tambah Keterangan' (Caption).\n4. Paste (Ctrl+V).\n5. Baru klik Kirim.");
                        } else {
                            prompt("Gambar tersimpan! Copy teks manual:", globalShareText);
                        }
                    }
                });
            });
        }
        
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const score = document.getElementById('resScore').innerText;
            const url = document.getElementById('resUrl').innerText;
            const lang = getCurrentLang();
            const content = texts[lang].pdf;
            
            var imgLogo = new Image();
            imgLogo.src = 'logo.png'; 
            
            imgLogo.onload = function() {
                doc.addImage(this, 'PNG', 20, 10, 25, 25);
                
                doc.setFont("times", "bold"); doc.setFontSize(22); doc.setTextColor(0); 
                doc.text("DISABILITAS.COM", 50, 20);
                doc.setFontSize(10); doc.setFont("helvetica", "normal");
                doc.text("Managed by: PT DIMASTER EDUCATION BERPRESTASI", 50, 26);
                doc.text("SK AHU-045800.AH.01.30.2024 | NIB: 1508240114679", 50, 31);
                doc.setFontSize(9); doc.text("Jalan Mulya Makarya No. A/1, Larangan Selatan, Kota Tangerang 15154", 50, 36);
                
                doc.setLineWidth(1); doc.line(20, 42, 190, 42); 

                doc.setFontSize(12); doc.setTextColor(0);
                const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
                const locale = lang === 'en' ? 'en-US' : 'id-ID';
                const dateStr = new Date().toLocaleDateString(locale, dateOptions);
                const city = lang === 'en' ? 'Tangerang City' : 'Kota Tangerang';
                
                doc.text(`${city}, ${dateStr}`, 190, 55, { align: 'right' });
                
                doc.text(content.to, 20, 65); doc.text(`${content.manager} ${url}`, 20, 71); doc.text(content.place, 20, 77);

                doc.text(content.greeting, 20, 90);
                doc.text(content.opening, 20, 97); doc.setFont("helvetica", "bold"); 
                doc.text("accessible.web.id", lang === 'en' ? 140 : 147, 97); doc.setFont("times", "normal");
                doc.text(content.opening2, 20, 103);
                
                doc.setFillColor(245, 245, 245); doc.rect(40, 115, 130, 40, 'F');
                doc.setFontSize(14); doc.text(content.scoreTitle, 105, 125, { align: 'center' });
                doc.setFontSize(30); doc.setFont("helvetica", "bold");
                
                if(score <= THRESHOLD_PANIC) doc.setTextColor(220, 53, 69);
                else if(score <= THRESHOLD_CAUTION) doc.setTextColor(255, 165, 0);
                else doc.setTextColor(40, 167, 69);
                
                doc.text(`${score}/100`, 105, 140, { align: 'center' });
                
                doc.setTextColor(0); doc.setFont("times", "normal"); doc.setFontSize(12);
                doc.text(content.noteTitle, 20, 170); doc.setFontSize(11);
                doc.text(content.note1, 20, 177); doc.text(content.note2, 20, 183);

                doc.text(content.closing, 20, 200); doc.text(content.closing2, 20, 206);

                doc.text(content.regards, 140, 225, { align: 'center' });
                doc.setFontSize(10); doc.setFont("helvetica", "italic"); doc.text(content.sign, 140, 240, { align: 'center' });
                doc.setFontSize(12); doc.setFont("times", "bold"); doc.text("Dimas P. Muharam", 140, 250, { align: 'center' });
                doc.setFont("times", "normal"); doc.setFontSize(10); doc.text("CEO & Founder Disabilitas.com", 140, 255, { align: 'center' });

                doc.addPage();
                doc.setFontSize(14); doc.setFont("helvetica", "bold"); doc.setTextColor(0, 50, 100);
                doc.text(content.page2Title, 20, 20); doc.setLineWidth(0.5); doc.line(20, 25, 190, 25);

                doc.setFontSize(11); doc.setTextColor(0); doc.setFont("helvetica", "normal");
                
                doc.setFont("helvetica", "bold"); doc.text(content.p1Title, 20, 40);
                doc.setFont("helvetica", "normal"); const p1Lines = doc.splitTextToSize(content.p1Body, 170); doc.text(p1Lines, 20, 46);

                doc.setFont("helvetica", "bold"); doc.text(content.p2Title, 20, 75);
                doc.setFont("helvetica", "normal"); const p2Lines = doc.splitTextToSize(content.p2Body, 170); doc.text(p2Lines, 20, 81);

                doc.setFont("helvetica", "bold"); doc.text(content.p3Title, 20, 110);
                doc.setFont("helvetica", "normal"); const p3Lines = doc.splitTextToSize(content.p3Body, 170); doc.text(p3Lines, 20, 116);

                doc.setFillColor(230, 240, 255); doc.rect(20, 150, 170, 40, 'F');
                doc.setFontSize(12); doc.setTextColor(0, 50, 100); doc.setFont("helvetica", "bold");
                doc.text(content.cta, 105, 165, { align: 'center' });
                doc.setFontSize(11); doc.setTextColor(0); doc.setFont("helvetica", "normal");
                doc.text("Email: audit@disabilitas.com | Web: disabilitas.com", 105, 175, { align: 'center' });

                let cleanUrl = url.replace(/^https?:\/\//, '').replace(/^www\./, '').replace(/\/$/, '').replace(/[\/\\:*?"<>|]/g, '-');
                let fileDate = new Date().toLocaleDateString('id-ID').replace(/\//g, '-');
                doc.save(`Audit_${cleanUrl}_${fileDate}_Score-${score}.pdf`);
            };
            imgLogo.onerror = function() { alert("Gagal memuat logo.png"); };
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
